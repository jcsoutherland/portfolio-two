{"ast":null,"code":"import * as React from 'react';\nimport * as THREE from 'three';\nimport { applyProps } from '@react-three/fiber';\nimport { DecalGeometry } from 'three-stdlib';\n\nfunction Decal(_ref) {\n  let {\n    debug,\n    mesh,\n    children,\n    position,\n    rotation,\n    scale\n  } = _ref;\n  const ref = React.useRef(null);\n  const helper = React.useRef(null);\n  React.useLayoutEffect(() => {\n    const parent = (mesh == null ? void 0 : mesh.current) || ref.current.parent;\n    const target = ref.current;\n\n    if (!(parent instanceof THREE.Mesh)) {\n      throw new Error('Decal must have a Mesh as parent or specify its \"mesh\" prop');\n    }\n\n    const state = {\n      position: new THREE.Vector3(),\n      rotation: new THREE.Euler(),\n      scale: new THREE.Vector3(1, 1, 1)\n    };\n\n    if (parent) {\n      applyProps(state, {\n        position,\n        scale\n      }); // Zero out the parents matrix world for this operation\n\n      const matrixWorld = parent.matrixWorld.clone();\n      parent.matrixWorld.identity();\n\n      if (!rotation || typeof rotation === 'number') {\n        const o = new THREE.Object3D();\n        o.position.copy(state.position);\n        o.lookAt(parent.position);\n        if (typeof rotation === 'number') o.rotateZ(rotation);\n        applyProps(state, {\n          rotation: o.rotation\n        });\n      } else {\n        applyProps(state, {\n          rotation\n        });\n      }\n\n      target.geometry = new DecalGeometry(parent, state.position, state.rotation, state.scale);\n      if (helper.current) applyProps(helper.current, state); // Reset parents matix-world\n\n      parent.matrixWorld = matrixWorld;\n      return () => {\n        target.geometry.dispose();\n      };\n    }\n  }, [mesh, position, scale, rotation]);\n  return /*#__PURE__*/React.createElement(\"mesh\", {\n    ref: ref\n  }, children || /*#__PURE__*/React.createElement(\"meshNormalMaterial\", {\n    polygonOffset: true,\n    polygonOffsetFactor: -4\n  }), debug && /*#__PURE__*/React.createElement(\"mesh\", {\n    ref: helper\n  }, /*#__PURE__*/React.createElement(\"boxGeometry\", null), /*#__PURE__*/React.createElement(\"meshNormalMaterial\", {\n    wireframe: true\n  }), /*#__PURE__*/React.createElement(\"axesHelper\", null)));\n}\n\nexport { Decal };","map":{"version":3,"names":["React","THREE","applyProps","DecalGeometry","Decal","debug","mesh","children","position","rotation","scale","ref","useRef","helper","useLayoutEffect","parent","current","target","Mesh","Error","state","Vector3","Euler","matrixWorld","clone","identity","o","Object3D","copy","lookAt","rotateZ","geometry","dispose","createElement","polygonOffset","polygonOffsetFactor","wireframe"],"sources":["/Users/jcsoutherland/Documents/GitHub/portfolio-two/node_modules/@react-three/drei/core/Decal.js"],"sourcesContent":["import * as React from 'react';\nimport * as THREE from 'three';\nimport { applyProps } from '@react-three/fiber';\nimport { DecalGeometry } from 'three-stdlib';\n\nfunction Decal({\n  debug,\n  mesh,\n  children,\n  position,\n  rotation,\n  scale\n}) {\n  const ref = React.useRef(null);\n  const helper = React.useRef(null);\n  React.useLayoutEffect(() => {\n    const parent = (mesh == null ? void 0 : mesh.current) || ref.current.parent;\n    const target = ref.current;\n\n    if (!(parent instanceof THREE.Mesh)) {\n      throw new Error('Decal must have a Mesh as parent or specify its \"mesh\" prop');\n    }\n\n    const state = {\n      position: new THREE.Vector3(),\n      rotation: new THREE.Euler(),\n      scale: new THREE.Vector3(1, 1, 1)\n    };\n\n    if (parent) {\n      applyProps(state, {\n        position,\n        scale\n      }); // Zero out the parents matrix world for this operation\n\n      const matrixWorld = parent.matrixWorld.clone();\n      parent.matrixWorld.identity();\n\n      if (!rotation || typeof rotation === 'number') {\n        const o = new THREE.Object3D();\n        o.position.copy(state.position);\n        o.lookAt(parent.position);\n        if (typeof rotation === 'number') o.rotateZ(rotation);\n        applyProps(state, {\n          rotation: o.rotation\n        });\n      } else {\n        applyProps(state, {\n          rotation\n        });\n      }\n\n      target.geometry = new DecalGeometry(parent, state.position, state.rotation, state.scale);\n      if (helper.current) applyProps(helper.current, state); // Reset parents matix-world\n\n      parent.matrixWorld = matrixWorld;\n      return () => {\n        target.geometry.dispose();\n      };\n    }\n  }, [mesh, position, scale, rotation]);\n  return /*#__PURE__*/React.createElement(\"mesh\", {\n    ref: ref\n  }, children || /*#__PURE__*/React.createElement(\"meshNormalMaterial\", {\n    polygonOffset: true,\n    polygonOffsetFactor: -4\n  }), debug && /*#__PURE__*/React.createElement(\"mesh\", {\n    ref: helper\n  }, /*#__PURE__*/React.createElement(\"boxGeometry\", null), /*#__PURE__*/React.createElement(\"meshNormalMaterial\", {\n    wireframe: true\n  }), /*#__PURE__*/React.createElement(\"axesHelper\", null)));\n}\n\nexport { Decal };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}