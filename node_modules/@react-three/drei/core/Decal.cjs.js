"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("three"),r=require("@react-three/fiber"),o=require("three-stdlib");function n(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var a=n(e),i=n(t);exports.Decal=function({debug:e,mesh:t,children:n,position:l,rotation:s,scale:c}){const u=a.useRef(null),p=a.useRef(null);return a.useLayoutEffect((()=>{const e=(null==t?void 0:t.current)||u.current.parent,n=u.current;if(!(e instanceof i.Mesh))throw new Error('Decal must have a Mesh as parent or specify its "mesh" prop');const a={position:new i.Vector3,rotation:new i.Euler,scale:new i.Vector3(1,1,1)};if(e){r.applyProps(a,{position:l,scale:c});const t=e.matrixWorld.clone();if(e.matrixWorld.identity(),s&&"number"!=typeof s)r.applyProps(a,{rotation:s});else{const t=new i.Object3D;t.position.copy(a.position),t.lookAt(e.position),"number"==typeof s&&t.rotateZ(s),r.applyProps(a,{rotation:t.rotation})}return n.geometry=new o.DecalGeometry(e,a.position,a.rotation,a.scale),p.current&&r.applyProps(p.current,a),e.matrixWorld=t,()=>{n.geometry.dispose()}}}),[t,l,c,s]),a.createElement("mesh",{ref:u},n||a.createElement("meshNormalMaterial",{polygonOffset:!0,polygonOffsetFactor:-4}),e&&a.createElement("mesh",{ref:p},a.createElement("boxGeometry",null),a.createElement("meshNormalMaterial",{wireframe:!0}),a.createElement("axesHelper",null)))};
